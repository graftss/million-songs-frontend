<!DOCTYPE html>
<html>
<head>
	<title>Hadoop Song Search</title>
	<style>
		h1 {
  			border: 2px dashed powderblue;
  			color: orange;
		}
</style>
</head>
<body>
	<CENTER>
		<h1>Million Song Search</h1>
		
		<br>
		<br>
   			<fieldset>
      			<legend>Search by:</legend>
      			<p>
	            <label>Select: </label>
	            <select id = "myList">
	            	<option value = "title">Song Name</option>
	               	<option value = "release">Album Name</option>
	               	<option value = "year">Year of Release</option>
	               	<option value = "full_key">Key</option>
	               	<!-- <option value = "min_duration">Min Duration</option> -->
	               	<!-- <option value = "max_duration">Max Duration</option> -->
	               	<option value = "artist_name">Artist Name</option>
	            </select>


					<input id="keywords" type="text" name="firstname" placeholder="Enter Keywords here">
				
					<input onclick="onClick()" type="submit" value="Submit">

					<div id="results"></div>

				<script>

					function onClick() {
						var list = document.getElementById("myList");
						var searchTerm = list.options[list.selectedIndex].value;
						var searchValue = document.getElementById('keywords').value;
						const searchOptions = makeOptions({ [searchTerm]: searchValue });
						console.log('hello!!!!!')
					    const testSearch = () => fetch('/api/search', searchOptions)
					      .then(res => res.text())
					      .then(results => {
					      	var div = document.getElementById('results');
					      	div.innerText = results;
					      });

				      testSearch();
					}

				    const makeOptions = body => ({
				      method: 'POST',
				      body: JSON.stringify(body),
				      headers: {
				        'Accept': 'application/json',
				        'Content-Type': 'application/json',
				      },
				    });

					var input = document.getElementById("myInput");
					input.addEventListener("keyup", function(event) {
						if (event.keyCode === 13) {
					   	event.preventDefault();
					   	document.getElementById("myBtn").click();
						}
					});
				</script>




	          </p>
	       </fieldset>
	</CENTER>
</body>
</html>